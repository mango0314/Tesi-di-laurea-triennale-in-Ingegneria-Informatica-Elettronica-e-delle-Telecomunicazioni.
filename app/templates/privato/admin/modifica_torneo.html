{% extends 'layout.html' %}

{% block head %}
  
  <title>
    {% if torneo %}
      Modifica {{ torneo.nome }} - Sports no Sekai
    {% else %}
      Aggiungi Torneo - Sports no Sekai
    {% endif %}
  </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='assets/ico/apple-touch-icon.png') }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='assets/ico/favicon-32x32.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='assets/ico/favicon-16x16.png') }}">
  <link rel="manifest" href="{{ url_for('static', filename='assets/ico/site.webmanifest') }}">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='fonts/icomoon/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap/bootstrap.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery-ui.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.carousel.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/jquery.fancybox.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='fonts/flaticon/font/flaticon.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/aos.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
{% endblock %}

{% block content %}
  {# Messaggio di errore #}
  {% if errore %}
    <div class="alert alert-danger">
      <ul>
        <li>{{ errore }}</li>
      </ul>
    </div>
  {% endif %}

  {# Header logo #}
  <div class="logo-header text-center py-4">
    <a href="{{ url_for('index.home') }}">
      <img src="{{ url_for('static', filename='images/Sports no Sekai logo no sfondo.png') }}"
           alt="Sports no Sekai" class="logo img-fluid" />
    </a>
  </div>

  <section class="login-hero d-flex align-items-center justify-content-center">
    <div class="container">
      <div class="row justify-content-center">
         <div class="col-12 col-sm-10 col-md-8 col-lg-6">

          <h1 class="text-center mb-4 text-white">Gestione Tornei</h1>

          <form id="contactForm"
                method="post"
                action="{{ url_for(torneo and 'modificatorneo.home' or 'aggiungitorneo.home') }}">
            
            <div class="form-floating mb-3">
              <input class="form-control"
                     id="nome"
                     name="nome_torneo"
                     type="text"
                     placeholder="Nome torneo"
                     required
                     value="{{ torneo.nome if torneo else '' }}">
              <div class="invalid-feedback">Nome torneo richiesto.</div>
            </div>

            {% if lista_sport %}
              <div class="form-floating mb-3">
                <select class="custom-select"
                        id="sport"
                        name="sport"
                        required>
                  <option value="" disabled selected>Seleziona lo sport</option>
                  {% for s in lista_sport %}
                    {% if s.id == 1 %}
                      {% set sport_name = "Calcio" %}
                    {% elif s.id == 2 %}
                      {% set sport_name = "Basket" %}
                    {% else %}
                      {% set sport_name = "Pallavolo" %}
                    {% endif %}
                    <option value="{{ s.id }}"
                            {% if torneo and torneo.sport_id == s.id %}selected{% endif %}>
                      {{ sport_name }}
                    </option>
                  {% endfor %}
                </select>
                
                <div class="invalid-feedback">Seleziona uno sport.</div>
              </div>
            {% endif %}

            {% if not torneo %}
              <div class="row">
                {% for n in range(1,5) %}
                  <div class="col-6 col-md-4 col-lg-3 logo-option mb-3">
                    <input type="radio"
                           id="logo{{ n }}"
                           name="teamLogo"
                           value="logo_{{ n }}.png"
                           required
                           {% if logo == "logo_" ~ n ~ ".png" %}checked{% endif %}>
                    <label for="logo{{ n }}" class="card p-2 text-center">
                      <img src="{{ url_for('static', filename='images/logo_' ~ n ~ '.png') }}"
                           class="img-fluid" alt="Logo {{ n }}">
                      <div class="mt-2">Logo {{ n }}</div>
                    </label>
                  </div>
                {% endfor %}
                <div class="invalid-feedback">Devi selezionare un logo.</div>
              </div>
            {% endif %}

            <button class="btn btn-primary btn-lg btn-block mt-4"
                    type="submit">
              Invia
            </button>
          </form>

         </div>
      </div>
    </div>
  </section>
{% endblock %}

{% block scripts %}

  <!-- Scripts originali da mantenere -->
  <script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery-migrate-3.0.1.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery-ui.js') }}"></script>
  <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.stellar.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.countdown.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/bootstrap-datepicker.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
  <script src="{{ url_for('static', filename='js/aos.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.fancybox.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.sticky.js') }}"></script>
  <script src="{{ url_for('static', filename='js/jquery.mb.YTPlayer.min.js') }}"></script>
 
{% endblock %}
